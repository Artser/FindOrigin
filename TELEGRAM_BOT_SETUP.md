# Настройка Telegram-бота

## Инструкция по созданию бота через BotFather

### 1. Получить токен бота

1. Откройте Telegram и найдите бота **@BotFather**
2. Начните диалог с ботом, нажав кнопку **Start** или отправив команду `/start`
3. Отправьте команду `/newbot` для создания нового бота
4. Следуйте инструкциям BotFather:
   - Введите **имя бота** (отображается в контактах): например, `Учебный бот`
   - Введите **username бота** (должен заканчиваться на `bot`): например, `ucheba_telegram_bot`
5. BotFather предоставит вам **токен бота** (выглядит как `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)
6. **Сохраните токен** - он понадобится для настройки переменных окружения

### 2. Настроить описание и команды бота

#### Настроить описание бота:
1. Отправьте команду `/setdescription` в BotFather
2. Выберите вашего бота из списка
3. Введите описание: `Бот для тренировки и проверки знаний в формате тестовых заданий`

#### Настроить команды бота:
1. Отправьте команду `/setcommands` в BotFather
2. Выберите вашего бота из списка
3. Отправьте список команд в формате:
```
start - Начать работу с ботом
help - Получить справку
```

### 3. Настроить webhook для получения обновлений

⚠️ **Важно**: Webhook настраивается **ПОСЛЕ первого деплоя** приложения в Vercel (или другую платформу), когда у вас будет публичный URL.

**Порядок действий:**
1. Сначала разверните приложение (например, в Vercel)
2. Получите публичный URL вашего приложения
3. Затем настройте webhook, указав этот URL

После развертывания бота выполните один из вариантов:

#### Вариант 1: Через API Route (рекомендуется)
Создайте endpoint для настройки webhook: `app/api/setup-webhook/route.ts`

#### Вариант 2: Вручную через Telegram API
Отправьте POST-запрос:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=<YOUR_WEBHOOK_URL>
```

Где:
- `<YOUR_BOT_TOKEN>` - токен вашего бота
- `<YOUR_WEBHOOK_URL>` - публичный URL вашего приложения + `/api/telegram`
  - Пример: `https://your-domain.com/api/telegram`

### Переменные окружения

После получения токена добавьте в файл `.env`:

```env
TELEGRAM_BOT_TOKEN=ваш_токен_бота
WEBHOOK_URL=https://your-domain.com/api/telegram
```

**Примечание:** 
- `TELEGRAM_BOT_TOKEN` - добавьте сразу после создания бота
- `WEBHOOK_URL` - добавьте после первого деплоя, когда получите публичный URL

**Пример:**
```env
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
WEBHOOK_URL=https://your-domain.com/api/telegram
```

⚠️ **Важно**: Замените `ваш_токен_бота` на реальный токен, который вы получили от BotFather.

### Проверка работы бота

1. Найдите вашего бота в Telegram по username
2. Отправьте команду `/start`
3. Бот должен ответить приветственным сообщением

### Безопасность

⚠️ **НИКОГДА не публикуйте токен бота в открытом доступе!**
- Храните токен в `.env` файле
- Не коммитьте `.env` в Git (уже добавлен в `.gitignore`)
- Используйте переменные окружения для production


