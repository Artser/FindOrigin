# Альтернативные поисковые API для России

Если вы находитесь в России и не можете использовать SerpAPI или Google Custom Search, вот доступные альтернативы:

## Вариант 1: Bing Search API (Рекомендуется) ⭐

**Microsoft Bing Search API** работает в России и предоставляет бесплатный тариф.

### Преимущества:
- ✅ Работает в России без ограничений
- ✅ 3,000 бесплатных запросов в месяц
- ✅ Простая настройка
- ✅ Хорошее качество результатов поиска

### Настройка:

1. **Создайте Microsoft аккаунт (если у вас его нет):**
   - ⚠️ **Важно:** Для Azure нужен Microsoft аккаунт (outlook.com, hotmail.com, live.com)
   - Если у вас только mail.ru, yandex.ru или другой email, создайте новый Microsoft аккаунт:
     - Перейдите на [account.microsoft.com](https://account.microsoft.com/)
     - Нажмите "Создать учетную запись Microsoft"
     - Используйте новый email (например, `ваше_имя@outlook.com`)
     - Или привяжите существующий email к Microsoft аккаунту

2. **Создайте Azure аккаунт:**
   - Перейдите на [Azure Portal](https://portal.azure.com/)
   - Войдите используя ваш Microsoft аккаунт
   - Создайте бесплатный аккаунт (требуется кредитная карта, но не списываются средства на бесплатном тарифе)

2. **Создайте ресурс Bing Search:**
   - В Azure Portal нажмите "Create a resource" (Создать ресурс)
   - Найдите "Bing Search v7"
   - Нажмите "Create" (Создать)
   - Заполните форму:
     - **Name**: любое имя (например: "FindOrigin-Bing")
     - **Pricing tier**: выберите "F1 Free" (3,000 запросов/месяц)
     - **Resource group**: создайте новую или выберите существующую
   - Нажмите "Review + create" → "Create"

3. **Получите API ключ:**
   - После создания ресурса перейдите в него
   - В разделе "Keys and Endpoint" скопируйте **Key 1**

4. **Добавьте в `.env.local`:**
   ```env
   BING_SEARCH_API_KEY=ваш_скопированный_ключ
   ```

### Лимиты:
- **Бесплатный тариф (F1)**: 3,000 запросов в месяц
- **Платный тариф (S1)**: от $4/месяц за 1,000 запросов

---

## Вариант 2: Yandex Search API

**Yandex** - российская поисковая система, работает без ограничений в России.

### Преимущества:
- ✅ Российский сервис, полностью доступен
- ✅ Хорошие результаты для русскоязычных запросов
- ✅ Бесплатный тариф доступен

### Недостатки:
- ⚠️ Требует более сложной настройки (XML API)
- ⚠️ Меньше документации на английском

### Настройка:

1. **Получите API ключ:**
   - Перейдите на [Yandex Developer](https://yandex.ru/dev/)
   - Войдите через Яндекс аккаунт
   - Перейдите в раздел "Поиск по сайту" или "XML API"
   - Создайте приложение и получите API ключ

2. **Добавьте в `.env.local`:**
   ```env
   YANDEX_SEARCH_API_KEY=ваш_yandex_api_ключ
   ```

**Примечание:** Yandex XML API требует специальной обработки XML ответов. Для упрощения рекомендуется использовать Bing Search API.

---

## Вариант 3: Google Custom Search API

Если у вас есть доступ к Google сервисам, можно использовать Google Custom Search API.

### Настройка:
См. файл `GOOGLE_API_SETUP.md` для подробной инструкции.

**Важно:** Если у вас проблемы с созданием поисковой системы, попробуйте:
- Использовать VPN (на свой риск)
- Обратиться в поддержку Google
- Использовать Bing Search API вместо этого

---

## Сравнение вариантов

| Параметр | Bing Search API | Yandex Search API | Google Custom Search |
|----------|----------------|-------------------|---------------------|
| Доступность в России | ✅ Да | ✅ Да | ⚠️ Зависит от доступа |
| Бесплатный лимит | 3,000/месяц | Зависит от тарифа | 100/день |
| Простота настройки | ⭐⭐⭐ Очень просто | ⭐⭐ Средне | ⭐ Сложно |
| Качество результатов | ⭐⭐⭐ Отлично | ⭐⭐⭐ Отлично | ⭐⭐⭐ Отлично |
| Документация | ⭐⭐⭐ Отлично | ⭐⭐ Хорошо | ⭐⭐⭐ Отлично |

## Рекомендация для России

**Используйте Bing Search API** - это лучший вариант:
- ✅ Работает без ограничений
- ✅ Простая настройка
- ✅ 3,000 бесплатных запросов в месяц
- ✅ Хорошее качество результатов

## Быстрый старт с Bing Search API

1. Создайте бесплатный Azure аккаунт: https://portal.azure.com/
2. Создайте ресурс "Bing Search v7" с тарифом "F1 Free"
3. Скопируйте API ключ из раздела "Keys and Endpoint"
4. Добавьте в `.env.local`:
   ```env
   BING_SEARCH_API_KEY=ваш_ключ
   ```
5. Перезапустите сервер: `npm run dev`

Готово! Бот будет использовать Bing Search API для поиска источников.

## Проверка работы

После настройки проверьте работу через PowerShell:

```powershell
$apiKey = "ваш_bing_api_ключ"
$query = "test"
$url = "https://api.bing.microsoft.com/v7.0/search?q=$query&mkt=ru-RU"
$headers = @{"Ocp-Apim-Subscription-Key" = $apiKey}
Invoke-WebRequest -Uri $url -Headers $headers | Select-Object -ExpandProperty Content
```

Если все настроено правильно, вы увидите JSON с результатами поиска.

## Устранение проблем

### Ошибка: "Invalid Subscription Key"
- Проверьте, что ключ скопирован полностью, без пробелов
- Убедитесь, что ключ добавлен в `.env.local`
- Перезапустите сервер после изменения `.env.local`

### Ошибка: "Insufficient quota"
- Вы использовали все 3,000 бесплатных запросов в месяц
- Подождите до следующего месяца
- Или перейдите на платный тариф S1

### Ошибка: "Resource not found"
- Убедитесь, что ресурс Bing Search создан в Azure
- Проверьте, что используете правильный ключ от нужного ресурса

## Полезные ссылки

- [Azure Portal](https://portal.azure.com/)
- [Документация Bing Search API](https://docs.microsoft.com/azure/cognitive-services/bing-web-search/)
- [Yandex Developer](https://yandex.ru/dev/)

